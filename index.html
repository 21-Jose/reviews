<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Comentarios de Usuarios</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }
    .container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1rem;
      padding: 1rem;
    }
    .comment {
      background: white;
      border-radius: 8px;
      padding: 1rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .comment.show {
      opacity: 1;
      transform: translateY(0);
    }
    .stars {
      color: gold;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }
    .username {
      font-weight: bold;
      margin-bottom: 0.25rem;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, opacity 0.4s ease;
      opacity: 0;
    }
    body.show-names .username {
      max-height: 100px;
      opacity: 1;
    }
    .text {
      color: #333;
    }
    .toggle-names-button {
      position: fixed;
      top: 10px;
      right: 10px;
      font-size: 1.5rem;
      padding: 0.5rem;
      background: white;
      border: none;
      border-radius: 50%;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      cursor: pointer;
      z-index: 1000;
      transition: transform 0.2s ease;
    }
    .toggle-names-button:hover {
      transform: scale(1.1);
    }
  </style>
</head>
<body>

  <button id="toggle-names" class="toggle-names-button" title="Mostrar nombres">üëÅÔ∏è</button>

  <div class="container" id="comments-container"></div>

  <script>
    const comments = [
      { user: "Ana", rating: 5, text: "Excelente servicio, ¬°muy recomendado!" },
      { user: "El rayo maqueen", rating: 5, text: "‚ö°Kachaw‚ö°" },
      { user: "Luis", rating: 4, text: "Todo bien, pero hay cosas que mejorar." },
      { user: "Marta", rating: 3, text: "Cumple su funci√≥n, sin destacar." },
      { user: "Carlos", rating: 2, text: "No fue lo que esperaba." },
      { user: "Sof√≠a", rating: 1, text: "Una experiencia terrible." },
      { user: "Pedro", rating: 5, text: "Me encant√≥, repetir√≠a sin dudarlo." },
      { user: "Luc√≠a", rating: 4, text: "Muy buena atenci√≥n y calidad." },
      { user: "Jorge", rating: 3, text: "Normal, no me sorprendi√≥." },
      { user: "Raquel", rating: 2, text: "Podr√≠a mejorar bastante." },
      { user: "Miguel", rating: 1, text: "No lo recomiendo para nada." },
      { user: "Esteban", rating: 5, text: "Fant√°stico desde el principio." },
      { user: "Natalia", rating: 4, text: "Buena experiencia en general." },
      { user: "Iv√°n", rating: 3, text: "Est√° bien, sin m√°s." },
      { user: "Andrea", rating: 2, text: "Demasiado lento el servicio." },
      { user: "Tom√°s", rating: 1, text: "No volver√© a usarlo." }
    ];

    let currentIndex = 0;

    function renderStars(rating, isRayo = false) {
      const symbol = isRayo ? '‚ö°' : '‚òÖ';
      const empty = isRayo ? '‚ö°' : '‚òÜ'; // Opcional: mantener rayos ‚Äúvac√≠os‚Äù o estrellas vac√≠as
      return symbol.repeat(rating) + empty.repeat(5 - rating);
    }

    function loadMoreComments(count = 3) {
      const container = document.getElementById('comments-container');
      const newElements = [];

      for (let i = 0; i < count && currentIndex < comments.length; i++) {
        const { user, rating, text } = comments[currentIndex++];
        const div = document.createElement('div');
        div.className = 'comment';
        const isRayo = user.toLowerCase() === "el rayo maqueen";
        div.innerHTML = `
          <div class="stars">${renderStars(rating, isRayo)}</div>
          <div class="username">${user}</div>
          <div class="text">${text}</div>
        `;
        container.appendChild(div);
        newElements.push(div);
      }

      newElements.forEach((el, i) => {
        setTimeout(() => el.classList.add('show'), i * 150);
      });
    }

    function loadUntilFilled() {
      const startHeight = document.body.scrollHeight;
      loadMoreComments(3);
      const afterLoadHeight = document.body.scrollHeight;
      if (afterLoadHeight < window.innerHeight && currentIndex < comments.length) {
        requestAnimationFrame(loadUntilFilled);
      }
    }

    window.addEventListener('scroll', () => {
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 100) {
        loadMoreComments(3);
      }
    });

    document.addEventListener('DOMContentLoaded', () => {
      loadUntilFilled();
      document.getElementById('toggle-names').addEventListener('click', () => {
        document.body.classList.toggle('show-names');
        const btn = document.getElementById('toggle-names');
        const showing = document.body.classList.contains('show-names');
        btn.textContent = showing ? 'üôà' : 'üëÅÔ∏è';
        btn.title = showing ? 'Ocultar nombres' : 'Mostrar nombres';
      });
    });
  </script>
</body>
</html>
