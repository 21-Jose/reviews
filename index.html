<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>¬øQu√© opina la gente de Jos√©?</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }
    h1 {
      text-align: center;
      padding: 1rem;
      background-color: #ffffff;
      margin: 0;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .controls {
      padding: 1rem;
      background: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      justify-content: center;
    }
    .controls input,
    .controls select,
    .controls button {
      padding: 0.5rem;
      font-size: 1rem;
      flex: 1 1 200px;
      min-width: 150px;
    }
    .container {
      max-width: 600px;
      margin: 1rem auto;
      padding: 0 1rem;
      margin-bottom: 5rem;
    }
    .comment {
      background: white;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.8s ease, transform 0.8s ease;
      position: relative;
    }
    .bros{
      position: absolute;
      top: 10px;
      right: 10px;
      height: 20%;
      opacity: 0.1;   
      pointer-events: none; 
      z-index: 0;
    }
    .comment.show {
      opacity: 1;
      transform: translateY(0);
    }
    .stars {
      color: gold;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }
    .username {
      font-weight: bold;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .username.hidden-name .name-text {
      display: none;
    }
    .username.visible-name .reveal-name-btn {
      display: none;
    }
    .reveal-name-btn {
      background: transparent;
      border: none;
      font-size: 1.1rem;
      cursor: pointer;
      padding: 0;
    }
    .text {
      color: #333;
    }
    .name-text{
      font-size: 1.1rem;
    }
    .name-text-manu{
      display: none;
    }
    .translate-btn {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      padding: 0.3rem 0.5rem;
      background: #e0e0e0;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .translate-btn:hover {
      background: #d0d0d0;
    }
    .translated-text {
      display: none;
      margin-top: 0.5rem;
      color: #555;
      opacity: 0;
      transition: opacity 0.4s ease;
    }
    .translated-text.show {
      display: block;
      opacity: 1;
    }
    .hidden {
      display: none !important;
    }

    .barney-img {
      display: block;
      margin-top: 1rem;
      height: 100px;
      border-radius: 8px;
      opacity: 0;
      transform: scale(0.8);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .barney-img.show {
      opacity: 1;
      transform: scale(1);
    }

    /*
* {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    */
    .banner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(90deg, #ffef00, #00bfff);
      color: #000;
      padding: 1rem;
      border-radius: 12px;
      font-family: 'Arial Black', sans-serif;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      flex-wrap: wrap;
    }

    .banner-text {
      flex: 1;
      min-width: 250px;
      margin-top: 20px;
    }

    .banner-text h3 {
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
    }

    .banner-text p {
      font-size: 1.1rem;
    }

    .banner-img {
      max-width: 180px;
      flex-shrink: 0;
      margin-left: 1rem;
    }

    .banner-img img {
      width: 100%;
      height: auto;
      border-radius: 10px;
      animation: girar 0.6s infinite ease-in-out;
    }

    @media (max-width: 849px) {
      .banner {
        position: relative;
        overflow-x: clip;
        text-align: center;
      }

      .banner-img {
        position: absolute;
        top: -130px;
        right: 10px;
      }
      .banner-img img{
        width: 150%;
      }
    }

    @media (max-width: 600px) {
      .banner {
        text-align: left;
      }
      .banner-img {
          top: -110px;
          right: 0px;
      }
      .banner-img img {
        width: 130%;
      }
      .banner-text h3 {
        font-size: 1.4rem;
        margin-bottom: 0.75rem;
        margin-top: 1.6rem;
      }
    }

    @media (min-width: 850px) {
      .banner{
        position: relative;
        text-align: center;
        overflow-x: clip;
      }
      .banner-img{
        position: absolute;
        right: 20px;
        top: -130px;
      }
      .banner-img img{
        width: 150%;
      }
    }

  #felicitacion {
    opacity: 0;
    transition: opacity 0.5s ease;
  }

  #felicitacion.visible {
    opacity: 1;
  }

  .close-banner {
    position: absolute;
    left: 10px;
    top: 10px;
    cursor: pointer;
    font-weight: bold;
    font-size: 25px;
    animation: palpitar 1.2s infinite ease-in-out;
    transition: transform 0.2s;
    color: #fff;
    text-shadow: 1.5px 0 #555;
  }

  .close-banner:hover {
    transform: scale(1.3);
  }

  @keyframes palpitar {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.2);
    }
  }

  @keyframes girar {
    0%, 100% {
      transform: scaleX(1);
    }
    50% {
      transform: scaleX(-1);
    }
  }
  </style>
</head>
<body>

  <h1>¬øQu√© opina la gente de Jos√©?</h1>

  <div class="controls">
    <input id="search-input" type="text" placeholder="Buscar comentarios..." />
    <select id="sort-select">
      <option value="original">Orden original</option>
      <option value="desc">Ordenar por valoraci√≥n: alta ‚Üí baja</option>
      <option value="asc">Ordenar por valoraci√≥n: baja ‚Üí alta</option>
    </select>
    <button id="toggle-names-btn">Mostrar nombres de usuarios</button>
  </div>

  <div class="container" id="comments-container"></div>


  <div class="banner">
    <span class="close-banner">‚úñ</span>
    <div class="banner-text">
      <h3>‚ö†Ô∏è ¬°¬°√öltimos d√≠as!! </h3>
      <h3>Pizzas a domicilio tra√≠das por este t√≠o </h3>
      <p>üçï ¬øTu pizza llega fr√≠a? ¬∑ Me la pela, dame mi propina üí∏</p>
    </div>
    <div class="banner-img">
      <img src="Jdomi.png" alt="Jos√© disfrazado promocionando pizzas" />
    </div>
  </div>

  <!-- Div oculto que aparecer√° con el mensaje de felicitaci√≥n -->
  <div id="felicitacion" style="display: none; padding: 30px; text-align: center; background-color: #fff3cd; color: #856404; font-size: 1.5em;">
    ü•≥¬°¬°¬°Felices 21!!!üéÇ de parte de todos tus seres queridos 
    <hr>
    <small>¬øCu√°ntos has adivinado?</small>
  </div>

  <audio id="gruntAudio" src="Grunt Birthday Party.mp3" preload="auto"></audio>

  <script>
    const allComments = [
      { user: "Carlos", rating: 3, text: "muy guapo el pelo pero no me liar√≠a." },
      { user: "Killer", rating: 5, text: "Es un t√≠o de puta madre: sincero, amable, trabajador, buena persona. Lo √∫nico es que es un poco dormil√≥n y se cabrea demasiado cuando pierde y se vuelve un poco bully, pero por lo dem√°s 10/10." },
      { user: "Sergio", rating: 4, text: "No era lo que esperaba, pero tampoco s√© qu√© esperaba. Lleg√≥ tarde, haciendo ruido y sin instrucciones. Dice ser ‚Äúedici√≥n limitada‚Äù, pero habla como si lo fabricaran en masa. Compatible con snacks y videojuegos, pero incompatible con madrugar. <br><br>No lo devolver√© solo porque ya me encari√±√©, pero tampoco lo recomendar√≠a a alguien que valore su paz mental." },
      { user: "Carras", rating: 6, text: "Tuve un a√±o en clase la prueba gratuita y la verdad que no la use casi, no se porque me dio al a√±o siguiente por empezar a pagar la suscripcion mensual, pero la verdad que no fue mala eleccion.<br><br>En verdad parece que fue ayer pero hacen ya casi 6 a√±os de esto,<br>5 a√±os desde que nos metiamos todos los dias por la tarde a jugar a dios sabe que,<br>4 a√±os desde la semana en guadalajara,<br>hacen 3 a√±os desde que vimos la primera conferencia de xbox y nos echaste de casa, desde el primer viaje a campello.<br>Hacen ya 2 a√±os de celebrar la nochevieja y las fechas especiales juntos,<br>Hace casi un a√±o de las uah projects, del viaje a la monta√±a, de que me dijeses de entrar al dominos a trabajar juntos... <br><br>Es una barbaridad recordar todos estos momentos y ver como hemos cambiado, aun conociendote desde solo ayer te he visto crecer y cambiar con todos, o alomejor es que te conozco desde hace mas tiempo no se. <br><br>Tendre que seguir pagando la suscripci√≥n esta por que me esta saliendo barata." },
      { user: "Zocky", rating: 5, text: "Buen amiguito, lo que m√°s me gusta es cuando viene a casa y nos rasca la barriguita y nos dice cositas a Toby y a mi ;)" },
      { user: "Mar√≠a", rating: 5, text: "Producto de puta madre, risas 100% aseguradas. Si eres fan√°tico de marvel aciertas seguro.<br><br>No te asustes, puede zamparse un bocadillo, unos filipinos y una bolsa de patatas en 20 minutos, pero la manzana nunca puede faltar. No te preocupes si le pierdes, se le distingue de lejos.<br><br>Nivel de competitividad alto (en el beisbol nos funde a todos, eso si, con el Mario Party le puedes fundir t√∫ a √©l)." },
      { user: "Ra√∫l", rating: 1, text: "Sin mas, la calidad no es su fuerte ya que me vino con una serie de manchas raras, por lo demas pues bien, algo flojo a veces. Tampoco se puede esperar mas de pipo" },
      { user: "Aitana", rating: 5, text: "Llevo ya un tiempo con el y por ahora a superado todas mis expectativas. Ha llegado en el momento exacto en el q ni siquiera sab√≠a q lo necesitaba. Me hace muy feliz y me hace ser mil veces mejor persona de la que fui. Le tengo un cari√±o √∫nico, de ese q hace dos a√±os pens√© q no volver√≠a a sentir algo as√≠. Es mi compa√±ero de vida y quiero q est√© siempre a mi lado como lo est√° puffy todas las noches (aunq no se lleven bien)." },
      { user: "Polo", rating: 5, text: "Un Amigo de Puta Madre.<br><br>Le conoc√≠ en clase y result√≥ ser una ganga. Desde el primer uso, ya ven√≠a soltando co√±as. No necesita manual de instrucciones: se entiende solo y funciona mejor que el WiFi de la Xbox.<br><br>Pros:<ul><li>Nivel de risas: infinito</li><li>Cae bien instant√°neamente</li> <li>Compatible con todo tipo de planes.</li></ul><br>Contras:<ul><li>A veces dice tonter√≠as que te hacen cuestionar tu salud mental de tanto re√≠r</li><li>No viene con bot√≥n de apagado (pero tampoco hace falta)</li></ul><br>Tutu, cu√≠dalo bien que ya no fabrican muchos como este. Limited edition 10/10." },
      { user: "Barney Stinson", rating: 5, text: ["Un t√≠o legen...","espera...","dario."]},
      { user: "Valent√≠n", rating: 5, text: "Joseador de efectivo es un real de los que no queda, m√°s que josear dinero josea mango locos.<br><br>Te quiero mucho brodi ‚ù§Ô∏è" },
      { user: "Mam√°", rating: 5, text: "Que puede decir una madre de su hijo, no hay palabras para describir uno de los d√≠as m√°s importantes de mi vida y fue cuando vi esa carita arrugadita y peloncete pero que para m√≠ eras el m√°s bonito del mundo. Que a√±os m√°s tarde te convertirias en todo un hombre, bueno, cari√±oso y muy responsable, amigo de sus amigos como hijo pendiente y siempre atento. <br><br>Solo deseo que todas tus metas se cumplan que seas muy feliz y si en alg√∫n momento desvaneces aqu√≠ esta tu madre para levantarte porque un hijo como tu se merece todo lo bueno que le pase. Feliz d√≠a cari√±o." },
      {
        user: "Phil Spencer",
        rating: 5,
        text: "Hope you all enjoyed our latest Xbox Showcase ‚Äî it means a lot to see the incredible energy from the community every year. Your passion, feedback, and support continue to inspire the entire team. Thanks for being on this journey with us. We‚Äôre just getting started.",
        translated: "Mondongo"
      },
      { user: "Dabri", rating: 4, text: "Buen representante de Domino's y dictador del servidor de Minecraft, tiene algunas contras como que viene desconfigurado la flexibilidad de las rodillas. Tambi√©n decir que en las instrucciones no ven√≠a una advertencia de que te echa de casa, por el resto contento con el producto (sigo buscando las diferencias en la switch 2)." },
      { user: "Rolo", rating: 6, text: "Aunque el no lo sepa, le admiro mucho. No cualquiera saca energ√≠as para seguir adelante mientras estudia, trabaja y siempre que puede saca tiempo para estar con su novia y sus amigos.<br><br>Desde que le conozco siempre ha hecho todo lo posible para salir adelante. Este es uno de los infinitos motivos por los que estoy orgulloso de la persona en la que se ha convertido. Digo convertido porque he conseguido ver su evoluci√≥n como persona desde cerca. Ha aprendido de sus errores desde muy peque√±o y esto le ha permitido ser la gran persona que es a d√≠a de hoy.<br><br>Digo esto porque a pesar de que no me lo digas, se que te arrepientes de como te comportaste conmigo cuando √©ramos ni√±os. As√≠ que aprovecho para decirte lo siguiente:<br>Yo ya te he perdonado desde hace mucho tiempo, desde el momento que me pediste perd√≥n en la casa del pueblo de Carlos. De hecho no solo te he perdonado. Considero que a pesar de que no tengamos la misma sangre, te has convertido en un hermano para mi. Siempre me apoyas incondicionalmente con mis pasiones y sue√±os. Cosa que muchas personas en las que confio no hacen‚Ä¶ Valoro mucho tu opini√≥n porque se que siempre vas a decir la verdad para que mejore como persona y no porque sea lo que quiero escuchar.<br><br>Siento haberte dado esta charla, pero he pensado que era el momento perfecto para recordarte que eres un amigo inigualable, una gran persona y un hermano para mi. Mi casa es tu casa, si lo necesitas mis puertas est√°n abiertas. Y quiero que se te grabe en cabeza." },
      { user: "Iv√°n", rating: 5, text: "Muy buena calidad 100% recomendable." },
      { user: "Rosa", rating: 5, text: "La primera impresi√≥n que tuve de ti estaba totalmente distorsionada a como eres en realidad, el tiempo me ha hecho darme cuenta que lo que me dec√≠an de ti no era verdad, pero me alegro de  poder haberte conocido mejor y  de poder hacer planes los 4 juntos. Gracias por hacer tan feliz a la gente que te rodea y que sepas que te mereces todo lo bueno que te pase." },
      { user: "El rayo maqueen", rating: 5, text: "¬°Ka-chow!" },
      { user: "Elsa", rating: 5, text: "Gran hermano, mejor compa√±ero.<br><br>Noble es su apellido, ah pero no le pidas dinero que capaz se tira record√°ndote lo que le debes un a√±o entero hasta que se lo devuelves. Mama no ha podido darme mejor regalo en esta vida que compartirla con el, siempre ha sido mi gran apoyo sobretodo en los momentos m√°s complicados que nos ha tocado vivir. Le admiro por lo que hace por su familia y amigos, tambi√©n por todo lo que ha conseguido poco a poco. Como hermana ahi estar√© yo para verle conseguir todo lo que se propone y sobretodo levantarle cuando se caiga y animarle a seguir hacia adelante, porque si una cosa tengo clara en esta vida es que nunca dejar√© que se hunda (ni el ni nadie en mi familia)<br><br>Uno de mis mi mejores recuerdos siempre ser√° de peque√±itos jugando con las olas del mar (odiaba ir a la playa pero siempre consegu√≠a que me lo pasara bien)" },
      { user: "Mau", rating: 6, text: "El producto me tardo un poco en llegar, pero llego en perfectas condiciones, sin golpes ni nada, lo √∫nico que le tuve que dar propina al repartidor del mech√≥n blanco para que se fuera, fue muy insistente con que le diera unas monedas, seguro que usa las propinas para pagarse chupitos de fiesta, que verg√ºenza. <br><br>Ahora en serio, que puedo decir de el gran nexo, la persona que nos uni√≥ a todos como grupo (como es su cumplea√±os le dar√© ese privilegio), cuando le conoc√≠ era un completo gilipollas, encima me intento pegar el flipado este, pero despu√©s de tantos a√±os, puedo decir que me alegro de haberle conocido gracias a esa situaci√≥n, bueno me desv√≠o del tema jaajajaj.<br><br>No se como expresar el orgullo y admiraci√≥n que siento por Jose, tiene una fuerza y car√°cter ante todo tipo de situaciones, pero siempre le ver√°s con una sonrisa y apoyando a la gente que quiere, a pesar de los problemas que pueda tener, saca un momento para escucharte y reflexionar juntos. Todo eso demuestra la incre√≠ble persona que es y todo lo que ha madurado, gracias por siempre estar ah√≠, incluso abri√©ndome las puertas de tu casa cuando necesitaba huir de mis problemas.<br><br>Me siento muy afortunado de tenerte como amigo, eres como un hermano para mi y ojal√° seguir vi√©ndote crecer como persona durante muchos a√±os m√°s." },
      { user: "√Ålvaro", rating: 5, text: "¬øQu√© ser√≠a de mi vida sin ti?<br><br>Hoy es un d√≠a muy especial, no solo porque es tu cumplea√±os sino que tengo la suerte de tenerte como compa√±ero de vida y un pilar fundamental al que puedo acudir c√≥modamente y contarle mis problemas (aunque no lo haga mucho). Gracias por los buenos momentos que hemos pasado juntos, sobre todo cuando √©ramos peque√±os, como ir a la piscina juntos o jugar a la play, esa consola que tantas peleas nos ha dado. Sin embargo, sin esas peleas nuestra relaci√≥n como hermanos no tendr√≠a sentido y, por ello, he pensado muchas veces que tu existencia ha sido necesaria en mi vida porque sino yo no ser√≠a el mismo y quiz√°s ser√≠a otra persona, en parte, una parte de mi es como es gracias a ti. <br><br>En conclusi√≥n, t√∫ siempre has sido, eres y ser√°s necesario para m√≠ porque aunque nos hayamos tenido que aguantar muchas veces, todo es con una buena intenci√≥n. <br><br>Feliz cumplea√±os ‚ù§Ô∏è" },
      { user: "Tutu", rating: 5, text: "Qu√© te voy a decir que no sepas a estas alturas. Si de algo he tenido oportunidad es de hablarte con palabras y actos d√≠a a d√≠a. Y demasiado texto llevas ya, no? <br><br>Espero que esta sorpresa te haya gustado mucho y sobre todo te haya transmitido y reforzado todo el cari√±o de tu gente, incluido el m√≠o si todav√≠a se puede m√°s. Ha sido mucho curro pero estoy muy contento con el resultado y porque s√© que te va a encantar üòÅ" },
      
    ];

    let filteredComments = [];

    function renderStars(rating, isRayo = false, isAitana = false, isCarrasco= false) {
      let baseSymbol, emptySymbol;

      if (isAitana) {
        baseSymbol = '‚ù§Ô∏è';
        emptySymbol = 'ü§ç';
      } else if (isRayo) {
        baseSymbol = '‚ö°';
        emptySymbol = '‚ö°';
      } else if (isCarrasco) {
        baseSymbol = 'üìÖ';
        emptySymbol = 'üìÖ';
      } else {
        baseSymbol = '‚òÖ';
        emptySymbol = '‚òÜ';
      }
      /*
      const baseSymbol = isRayo ? '‚ö°' : '‚òÖ';
      const emptySymbol = isRayo ? '‚ö°' : '‚òÜ';
      */
      if (rating === 6) {
        if (isCarrasco){
          return baseSymbol.repeat(6);
        } else {
          return baseSymbol.repeat(5) + '<span title="Estrella extra especial" style="font-size: 1rem;">‚ú®</span>';
        }
        
      } else {
        return baseSymbol.repeat(rating) + emptySymbol.repeat(5 - rating);
      }
    }

    function renderCommentsWithFadeIn() {
      const container = document.getElementById('comments-container');
      container.innerHTML = '';
      filteredComments.forEach((comment, index) => {
        const { user, rating, text, translated } = comment;
        const isRayo = user.toLowerCase().includes("rayo");
        const isAitana = user.toLowerCase().includes("aitana");
        const isManu = user.toLowerCase().includes("tutu");
        const isCarrasco = user.toLowerCase().includes("carras");
        const isBarneyStyle = Array.isArray(text); // Detectar si es tipo Barney (varias strings)
    
        const div = document.createElement('div');
        div.className = 'comment';
        div.style.transitionDelay = `${index * 150}ms`;
    
        let textHtml = '';
    
        if (isBarneyStyle) {
          textHtml = `
            <span class="barney-part" data-step="0">${text[0]}</span>
            <button class="barney-btn" data-next="1">Mostrar m√°s</button>
          `;
        } else {
          textHtml = `<div class="text">${text}</div>`;
        }

        if (isAitana) {
          div.innerHTML = `
          <div class="stars" style="font-size:0.75rem; letter-spacing: 0.03rem;">${renderStars(rating, isRayo, isAitana)}</div>
          <div class="username hidden-name">
            <button class="reveal-name-btn" title="Mostrar nombre">‚ùî‚ùî‚ùî</button>
            <span class="name-text">${user}</span>
          </div>
          <div class="text">${textHtml}</div>
          `;
        } else if (isCarrasco) {
          div.innerHTML = `
          <div class="stars" style="font-size:0.75rem;">${renderStars(rating, isRayo, isAitana, isCarrasco)}</div>
          <div class="username hidden-name">
            <button class="reveal-name-btn" title="Mostrar nombre">‚ùî‚ùî‚ùî</button>
            <span class="name-text">${user}</span>
          </div>
          <div class="text">${textHtml}</div>
          `;
        } else if (isManu) {
          div.className = 'comment comment-manu';
          div.innerHTML = `
          <div class="stars">${renderStars(rating, isRayo, isAitana, isCarrasco)}</div>
          <div class="username hidden-name">
            <button class="reveal-name-btn" title="Mostrar nombre">‚ùî‚ùî‚ùî</button>
            <span class="name-text name-text-tutu">${user}</span>
            <span class="name-text name-text-manu">Manu</span>
          </div>
          <img src="bros.png" alt="bros" class="bros" />
          <div class="text" style="z-index:1;">${textHtml}</div>
          `;
        } else{
          div.innerHTML = `
            <div class="stars">${renderStars(rating, isRayo, isAitana, isCarrasco)}</div>
            <div class="username hidden-name">
              <button class="reveal-name-btn" title="Mostrar nombre">‚ùî‚ùî‚ùî</button>
              <span class="name-text">${user}</span>
            </div>
            <div class="text">${textHtml}</div>
            ${translated ? `
              <button class="translate-btn">Mostrar traducci√≥n</button>
              <div class="translated-text">${translated}</div>
            ` : ''}
          `;
        }
        container.appendChild(div);
        requestAnimationFrame(() => {
          div.classList.add('show');
        });
      });
    }
    function applyFilters() {
      const search = document.getElementById('search-input').value.toLowerCase();
      const sort = document.getElementById('sort-select').value;
      
      // CHACHO APLICAME ESTO
      filteredComments = allComments
        .filter(c => {
            const text = typeof c.text === 'string'
              ? c.text
              : (Array.isArray(c.text?.parts) ? c.text.parts.join(' ') : '');
            return text.toLowerCase().includes(search);
          });

      if (sort === 'asc') {
        filteredComments.sort((a, b) => a.rating - b.rating);
      } else if (sort === 'desc') {
        filteredComments.sort((a, b) => b.rating - a.rating);
      }
      // 'original' no sort

      renderCommentsWithFadeIn();
    }

    document.addEventListener('DOMContentLoaded', () => {
      applyFilters();

      document.getElementById('search-input').addEventListener('input', applyFilters);
      document.getElementById('sort-select').addEventListener('change', applyFilters);

      const toggleNamesBtn = document.getElementById('toggle-names-btn');
      let namesVisible = false;

      toggleNamesBtn.addEventListener('click', () => {
        const usernames = document.querySelectorAll('.username');
        usernames.forEach(u => {
          u.classList.toggle('visible-name', !namesVisible);
          u.classList.toggle('hidden-name', namesVisible);
        });
        namesVisible = !namesVisible;
        toggleNamesBtn.textContent = namesVisible
          ? "Ocultar nombres de usuarios"
          : "Mostrar nombres de usuarios";
      });

      const container = document.getElementById('comments-container');
      container.addEventListener('click', (e) => {
        if (e.target.classList.contains("translate-btn")) {
          e.stopPropagation();
          const btn = e.target;
          const txt = btn.nextElementSibling;
          const isVisible = txt.classList.contains('show');
          txt.classList.toggle('show');
          btn.textContent = isVisible ? "Mostrar traducci√≥n" : "Ocultar traducci√≥n";
        }

        if (e.target.classList.contains("reveal-name-btn")) {
          e.stopPropagation();
          const comment = e.target.closest('.comment');
          const nameEl = comment.querySelector(".username");
          nameEl.classList.remove('hidden-name');
          nameEl.classList.add('visible-name');

          if (comment.hasClass = "comment-manu") {
            setTimeout(() => {
              const nameTutu = comment.querySelector(".name-text-tutu");
              const nameManu = comment.querySelector(".name-text-manu");
              nameTutu.style.display = "none";
              nameManu.style.display = "flex";
            }, 1000); // despu√©s de 1s, cambia a "Manu"
          }
          
        }
        if (e.target.classList.contains("barney-btn")) {
          e.stopPropagation();
          const btn = e.target;
          const nextStep = parseInt(btn.dataset.next, 10);
          const commentEl = btn.closest('.comment');
          const span = commentEl.querySelector('.barney-part');
          const index = Array.from(document.getElementById('comments-container').children).indexOf(commentEl);
          const parts = allComments[index].text;
        
          span.textContent += " " + parts[nextStep];
          
          if (nextStep + 1 < parts.length) {
            btn.dataset.next = nextStep + 1;
          } else {
            btn.remove(); // √öltima parte mostrada, se quita el bot√≥n
          
            // A√±adir imagen con animaci√≥n
            const img = document.createElement("img");
            img.src = "barney.png";
            img.alt = "Barney Stinson";
            img.className = "barney-img";
            commentEl.appendChild(img);
            
            // Forzar la animaci√≥n despu√©s de a√±adirla
            requestAnimationFrame(() => {
              img.classList.add("show");
            });
          }
        }
      });
    });

     document.querySelector('.close-banner').addEventListener('click', function() {
      const banner = document.querySelector('.banner');
      const mensaje = document.getElementById('felicitacion');
  
      banner.style.display = 'none';
      mensaje.style.display = 'block';

      const audio = document.getElementById('gruntAudio');
      audio.currentTime = 0; // Reinicia el audio por si ya se ha reproducido
      audio.play();
      
      // Forzar reflow para que funcione la transici√≥n
      void mensaje.offsetWidth;
      mensaje.classList.add('visible');
    });
  </script>
</body>
</html>
